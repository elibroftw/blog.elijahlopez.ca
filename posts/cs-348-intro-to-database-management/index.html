<!doctype html><html lang=en data-theme=dark><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>CS 348 Intro to Database Management - ELL Blog</title>
<meta name=description content="Table of Contents Objectives Viewpoints Sub-objectives File-Processing Systems Disadvantages with File-Processing Systems Databases Database Definition Database Management System (DBMS) Scheme Definition Database Instance Definition Levels The Relational Model Data Model Schema and Instance Integrity Constraints The Relational Algebra Operators Selection Projection Cross Product Conditional Join Natural Join Set-Based Relational Operators Summary of Relational Operators Finding the maximums of a relation Algebraic Equivalences Relational Completeness The Relational Calculus SQL - Structured Query Language Data Types Tables Queries Subqueries Data Modifications SQL Intermediate Topics Check Constraints Foreign Key Contraints Deleting in Referenced Relation Views Access Control Indexes SQL Relational Division SQL Drivers Prepared Statements Metadata Features Functions and Procedures Triggers Ranking Windowing (Moving) Pivoting Rollup and Cube Recursion Entity-Relationship Model Database Design Complex Attributes Mapping Cardinality Primary Keys in E-R Model Removing Redundant Attributes in Entity Sets Specialization Common Mistakes E-R Diagram to Relational Tables Schema Refinement: Dependencies Example Single-Table Schema Too many Tables Functional Dependencies: Armstrong&rsquo;s Axioms Function Dependencies: Attribute Closure Schema Decomposition Transactions Transaction Execution History Serial Execution HIstories SQL Isolation Levels Indexing Index Structure Transaction Processing Concurrency Control - Isolation Two-Phase Locking Recovery - Atomicity and Durability Logging Data Analytics: Warehousing and Mining Online Transactional Processing (OLTP) Data Analytics Data Warehouses Big Data MapReduce Hadoop Apache Spark NoSQL Systems CAP Theorem Key-Value Stores Amazon DynamoDB MongoDB Google BigTable Graph DBMSs Objectives Viewpoints database user database designer database manager Sub-objectives SQL data modeling management database management system (DBMS) Relational model Application programming Transaction and concurrency File-Processing Systems Disadvantages with File-Processing Systems Data redundancy and inconsistency various copies leads to higher storage Difficulty in accessing or modifying data Integritty problems New constraints require changing the program Atomicity problem Difficult to ensure atomic property and to restore state after failure Concurrency issues Security Databases Database Definition A large and persistent collection of (more-or-less similar) pieces of information organized in a way that facilitates efficient retrieval and modification."><link rel=icon type=image/x-icon href=https://blog.elijahlopez.ca/favicon.ico><link rel=apple-touch-icon-precomposed href=https://blog.elijahlopez.ca/favicon.png><style>body{visibility:hidden;opacity:0}</style><noscript><style>body{visibility:visible;opacity:1}</style></noscript><link rel=stylesheet href=https://blog.elijahlopez.ca/css/style.min.ccf2576b8f635114a857ab1559f7d6e315740f00d29b3a8b9572181998dd1a72.css integrity="sha256-zPJXa49jURSoV6sVWffW4xV0DwDSmzqLlXIYGZjdGnI="><script src=https://blog.elijahlopez.ca/js/script.min.74bf1a3fcf1af396efa4acf3e660e876b61a2153ab9cbe1893ac24ea6d4f94ee.js type=text/javascript integrity="sha256-dL8aP88a85bvpKzz5mDodrYaIVOrnL4Yk6wk6m1PlO4="></script><meta property="og:title" content="CS 348 Intro to Database Management"><meta property="og:description" content="Table of Contents Objectives Viewpoints Sub-objectives File-Processing Systems Disadvantages with File-Processing Systems Databases Database Definition Database Management System (DBMS) Scheme Definition Database Instance Definition Levels The Relational Model Data Model Schema and Instance Integrity Constraints The Relational Algebra Operators Selection Projection Cross Product Conditional Join Natural Join Set-Based Relational Operators Summary of Relational Operators Finding the maximums of a relation Algebraic Equivalences Relational Completeness The Relational Calculus SQL - Structured Query Language Data Types Tables Queries Subqueries Data Modifications SQL Intermediate Topics Check Constraints Foreign Key Contraints Deleting in Referenced Relation Views Access Control Indexes SQL Relational Division SQL Drivers Prepared Statements Metadata Features Functions and Procedures Triggers Ranking Windowing (Moving) Pivoting Rollup and Cube Recursion Entity-Relationship Model Database Design Complex Attributes Mapping Cardinality Primary Keys in E-R Model Removing Redundant Attributes in Entity Sets Specialization Common Mistakes E-R Diagram to Relational Tables Schema Refinement: Dependencies Example Single-Table Schema Too many Tables Functional Dependencies: Armstrong&rsquo;s Axioms Function Dependencies: Attribute Closure Schema Decomposition Transactions Transaction Execution History Serial Execution HIstories SQL Isolation Levels Indexing Index Structure Transaction Processing Concurrency Control - Isolation Two-Phase Locking Recovery - Atomicity and Durability Logging Data Analytics: Warehousing and Mining Online Transactional Processing (OLTP) Data Analytics Data Warehouses Big Data MapReduce Hadoop Apache Spark NoSQL Systems CAP Theorem Key-Value Stores Amazon DynamoDB MongoDB Google BigTable Graph DBMSs Objectives Viewpoints database user database designer database manager Sub-objectives SQL data modeling management database management system (DBMS) Relational model Application programming Transaction and concurrency File-Processing Systems Disadvantages with File-Processing Systems Data redundancy and inconsistency various copies leads to higher storage Difficulty in accessing or modifying data Integritty problems New constraints require changing the program Atomicity problem Difficult to ensure atomic property and to restore state after failure Concurrency issues Security Databases Database Definition A large and persistent collection of (more-or-less similar) pieces of information organized in a way that facilitates efficient retrieval and modification."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.elijahlopez.ca/posts/cs-348-intro-to-database-management/"><meta property="og:image" content="https://blog.elijahlopez.ca/images"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-10T16:02:06-05:00"><meta property="article:modified_time" content="2023-01-10T16:02:06-05:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.elijahlopez.ca/images"><meta name=twitter:title content="CS 348 Intro to Database Management"><meta name=twitter:description content="Table of Contents Objectives Viewpoints Sub-objectives File-Processing Systems Disadvantages with File-Processing Systems Databases Database Definition Database Management System (DBMS) Scheme Definition Database Instance Definition Levels The Relational Model Data Model Schema and Instance Integrity Constraints The Relational Algebra Operators Selection Projection Cross Product Conditional Join Natural Join Set-Based Relational Operators Summary of Relational Operators Finding the maximums of a relation Algebraic Equivalences Relational Completeness The Relational Calculus SQL - Structured Query Language Data Types Tables Queries Subqueries Data Modifications SQL Intermediate Topics Check Constraints Foreign Key Contraints Deleting in Referenced Relation Views Access Control Indexes SQL Relational Division SQL Drivers Prepared Statements Metadata Features Functions and Procedures Triggers Ranking Windowing (Moving) Pivoting Rollup and Cube Recursion Entity-Relationship Model Database Design Complex Attributes Mapping Cardinality Primary Keys in E-R Model Removing Redundant Attributes in Entity Sets Specialization Common Mistakes E-R Diagram to Relational Tables Schema Refinement: Dependencies Example Single-Table Schema Too many Tables Functional Dependencies: Armstrong&rsquo;s Axioms Function Dependencies: Attribute Closure Schema Decomposition Transactions Transaction Execution History Serial Execution HIstories SQL Isolation Levels Indexing Index Structure Transaction Processing Concurrency Control - Isolation Two-Phase Locking Recovery - Atomicity and Durability Logging Data Analytics: Warehousing and Mining Online Transactional Processing (OLTP) Data Analytics Data Warehouses Big Data MapReduce Hadoop Apache Spark NoSQL Systems CAP Theorem Key-Value Stores Amazon DynamoDB MongoDB Google BigTable Graph DBMSs Objectives Viewpoints database user database designer database manager Sub-objectives SQL data modeling management database management system (DBMS) Relational model Application programming Transaction and concurrency File-Processing Systems Disadvantages with File-Processing Systems Data redundancy and inconsistency various copies leads to higher storage Difficulty in accessing or modifying data Integritty problems New constraints require changing the program Atomicity problem Difficult to ensure atomic property and to restore state after failure Concurrency issues Security Databases Database Definition A large and persistent collection of (more-or-less similar) pieces of information organized in a way that facilitates efficient retrieval and modification."></head><body><a class=skip-main href=#main>Skip to main content</a><div class=container><header class=common-header><div class=header-top><h1 class=site-title><a href=/>ELL Blog</a></h1><ul class=social-icons><li><a href=/index.xml title=Rss rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" data-icon="rss" data-prefix="fas" focusable="false" role="img" viewBox="0 0 496 512"><path fill="currentcolor" fill="currentcolor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328.0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765.0 183.105.0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686.0 38.981.0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg></span></a></li><li><a href=https://elijahlopez.ca title=Website rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M352 256C352 278.2 350.8 299.6 348.7 320H163.3C161.2 299.6 159.1 278.2 159.1 256S161.2 212.4 163.3 192H348.7C350.8 212.4 352 233.8 352 256zm151.9-64C509.2 212.5 512 233.9 512 256S509.2 299.5 503.9 320H380.8C382.9 299.4 384 277.1 384 256 384 234 382.9 212.6 380.8 192H503.9zm-10.5-32H376.7c-10-63.86-29.8-117.38-55.3-151.558C399.8 29.09 463.4 85.94 493.4 160zm-149.1.0H167.7C173.8 123.6 183.2 91.38 194.7 65.35c10.5-23.61 22.2-40.74 33.5-51.54C239.4 3.178 248.7.0 256 0s16.6 3.178 27.8 13.81c11.3 10.8 23 27.93 33.5 51.54 11.5 26.03 20.9 58.25 27 94.65h0zM18.61 160C48.59 85.94 112.2 29.09 190.6 8.442 165.1 42.62 145.3 96.14 135.3 160H18.61zM131.2 192C129.1 212.6 127.1 234 127.1 256 127.1 277.1 129.1 299.4 131.2 320H8.065C2.8 299.5.0 278.1.0 256c0-22.1 2.8-43.5 8.065-64H131.2zm63.5 254.6c-11.5-26-20.9-58.2-27-94.6H344.3C338.2 388.4 328.8 420.6 317.3 446.6c-10.5 23.7-22.2 40.8-33.5 51.6-11.2 10.6-20.5 13.8-28.7 13.8C248.7 512 239.4 508.8 228.2 498.2c-11.3-10.8-23-27.9-33.5-51.6h0zM190.6 503.6C112.2 482.9 48.59 426.1 18.61 352H135.3c10 63.9 29.8 117.4 55.3 151.6v0zm130.8.0C346.9 469.4 366.7 415.9 376.7 352H493.4c-30 74.1-93.6 130.9-172 151.6v0z"/></svg></span></a></li><li><a href=https://github.com/elibroftw title=Github rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a></li><li><a href=https://twitter.com/elibroftw title=Twitter rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></a></li><li><a href=https://www.youtube.com/c/elibroftw title=Youtube rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg></span></a></li><li><a href=mailto:elijahllopezz@gmail.com title=Email rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M464 64H48C21.49 64 0 85.49.0 112v288c0 26.51 21.49 48 48 48h416c26.51.0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 4e2V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V4e2H48z"/></svg></span></a></li></ul></div><nav><a href=https://blog.elijahlopez.ca/ title=Home>Home</a>
<a href=https://blog.elijahlopez.ca/posts/ title=Archive>Archive</a>
<a href=https://blog.elijahlopez.ca/tags/ title=Tags>Tags</a></nav></header><main id=main tabindex=-1><article class="post h-entry"><div class=post-header><header><h1 class="p-name post-title">CS 348 Intro to Database Management</h1></header></div><div class="content e-content"><div><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><a href=#objectives>Objectives</a><ul><li><a href=#viewpoints>Viewpoints</a></li><li><a href=#sub-objectives>Sub-objectives</a></li></ul></li><li><a href=#file-processing-systems>File-Processing Systems</a><ul><li><a href=#disadvantages-with-file-processing-systems>Disadvantages with File-Processing Systems</a></li></ul></li><li><a href=#databases>Databases</a><ul><li><a href=#database-definition>Database Definition</a></li><li><a href=#database-management-system-dbms>Database Management System (DBMS)</a></li><li><a href=#scheme-definition>Scheme Definition</a></li><li><a href=#database-instance-definition>Database Instance Definition</a></li><li><a href=#levels>Levels</a></li></ul></li><li><a href=#the-relational-model>The Relational Model</a><ul><li><a href=#data-model>Data Model</a></li><li><a href=#schema-and-instance>Schema and Instance</a></li><li><a href=#integrity-constraints>Integrity Constraints</a></li></ul></li><li><a href=#the-relational-algebra>The Relational Algebra</a><ul><li><a href=#operators>Operators</a></li><li><a href=#selection>Selection</a></li><li><a href=#projection>Projection</a></li><li><a href=#cross-product>Cross Product</a></li><li><a href=#conditional-join>Conditional Join</a></li><li><a href=#natural-join>Natural Join</a></li><li><a href=#set-based-relational-operators>Set-Based Relational Operators</a></li><li><a href=#summary-of-relational-operators>Summary of Relational Operators</a></li><li><a href=#finding-the-maximums-of-a-relation>Finding the maximums of a relation</a></li><li><a href=#algebraic-equivalences>Algebraic Equivalences</a></li><li><a href=#relational-completeness>Relational Completeness</a></li><li><a href=#the-relational-calculus>The Relational Calculus</a></li></ul></li><li><a href=#sql---structured-query-language>SQL - Structured Query Language</a><ul><li><a href=#data-types>Data Types</a></li><li><a href=#tables>Tables</a></li><li><a href=#queries>Queries</a></li><li><a href=#subqueries>Subqueries</a></li><li><a href=#data-modifications>Data Modifications</a></li></ul></li><li><a href=#sql-intermediate-topics>SQL Intermediate Topics</a><ul><li><a href=#check-constraints>Check Constraints</a></li><li><a href=#foreign-key-contraints>Foreign Key Contraints</a></li><li><a href=#deleting-in-referenced-relation>Deleting in Referenced Relation</a></li><li><a href=#views>Views</a></li><li><a href=#access-control>Access Control</a></li><li><a href=#indexes>Indexes</a></li><li><a href=#sql-relational-division>SQL Relational Division</a></li></ul></li><li><a href=#sql-drivers>SQL Drivers</a><ul><li><a href=#prepared-statements>Prepared Statements</a></li><li><a href=#metadata-features>Metadata Features</a></li></ul></li><li><a href=#functions-and-procedures>Functions and Procedures</a></li><li><a href=#triggers>Triggers</a></li><li><a href=#ranking>Ranking</a></li><li><a href=#windowing-moving>Windowing (Moving)</a></li><li><a href=#pivoting>Pivoting</a></li><li><a href=#rollup-and-cube>Rollup and Cube</a></li><li><a href=#recursion>Recursion</a></li><li><a href=#entity-relationship-model>Entity-Relationship Model</a><ul><li><a href=#database-design>Database Design</a></li><li><a href=#complex-attributes>Complex Attributes</a></li><li><a href=#mapping-cardinality>Mapping Cardinality</a></li><li><a href=#primary-keys-in-e-r-model>Primary Keys in E-R Model</a></li><li><a href=#removing-redundant-attributes-in-entity-sets>Removing Redundant Attributes in Entity Sets</a></li><li><a href=#specialization>Specialization</a></li><li><a href=#common-mistakes>Common Mistakes</a></li></ul></li><li><a href=#e-r-diagram-to-relational-tables>E-R Diagram to Relational Tables</a></li><li><a href=#schema-refinement-dependencies>Schema Refinement: Dependencies</a><ul><li><a href=#example>Example</a></li><li><a href=#single-table-schema>Single-Table Schema</a></li><li><a href=#too-many-tables>Too many Tables</a></li><li><a href=#functional-dependencies-armstrongs-axioms>Functional Dependencies: Armstrong&rsquo;s Axioms</a></li><li><a href=#function-dependencies-attribute-closure>Function Dependencies: Attribute Closure</a></li><li><a href=#schema-decomposition>Schema Decomposition</a></li></ul></li><li><a href=#transactions>Transactions</a><ul><li><a href=#transaction>Transaction</a></li><li><a href=#execution-history>Execution History</a></li><li><a href=#serial-execution-histories>Serial Execution HIstories</a></li><li><a href=#sql-isolation-levels>SQL Isolation Levels</a></li></ul></li><li><a href=#indexing>Indexing</a><ul><li><a href=#index-structure>Index Structure</a></li></ul></li><li><a href=#transaction-processing>Transaction Processing</a><ul><li><a href=#concurrency-control---isolation>Concurrency Control - Isolation</a></li><li><a href=#two-phase-locking>Two-Phase Locking</a></li><li><a href=#recovery---atomicity-and-durability>Recovery - Atomicity and Durability</a></li><li><a href=#logging>Logging</a></li></ul></li><li><a href=#data-analytics-warehousing-and-mining>Data Analytics: Warehousing and Mining</a><ul><li><a href=#online-transactional-processing-oltp>Online Transactional Processing (OLTP)</a></li><li><a href=#data-analytics>Data Analytics</a></li><li><a href=#data-warehouses>Data Warehouses</a></li></ul></li><li><a href=#big-data>Big Data</a><ul><li><a href=#mapreduce>MapReduce</a></li><li><a href=#hadoop>Hadoop</a></li><li><a href=#apache-spark>Apache Spark</a></li></ul></li><li><a href=#nosql-systems>NoSQL Systems</a><ul><li><a href=#cap-theorem>CAP Theorem</a></li><li><a href=#key-value-stores>Key-Value Stores</a></li><li><a href=#amazon-dynamodb>Amazon DynamoDB</a></li><li><a href=#mongodb>MongoDB</a></li><li><a href=#google-bigtable>Google BigTable</a></li><li><a href=#graph-dbmss>Graph DBMSs</a></li></ul></li></ul></nav></div><h2 id=objectives>Objectives
<span><a href=#objectives><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><h3 id=viewpoints>Viewpoints
<span><a href=#viewpoints><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>database user</li><li>database designer</li><li>database manager</li></ul><h3 id=sub-objectives>Sub-objectives
<span><a href=#sub-objectives><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>SQL</li><li>data modeling</li><li>management</li><li>database management system (DBMS)</li><li>Relational model</li><li>Application programming</li><li>Transaction and concurrency</li></ul><h2 id=file-processing-systems>File-Processing Systems
<span><a href=#file-processing-systems><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><h3 id=disadvantages-with-file-processing-systems>Disadvantages with File-Processing Systems
<span><a href=#disadvantages-with-file-processing-systems><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Data redundancy and inconsistency<ul><li>various copies leads to higher storage</li></ul></li><li>Difficulty in accessing or modifying data</li><li>Integritty problems<ul><li>New constraints require changing the program</li></ul></li><li>Atomicity problem<ul><li>Difficult to ensure atomic property and to restore state after failure</li></ul></li><li>Concurrency issues</li><li>Security</li></ul><h2 id=databases>Databases
<span><a href=#databases><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><h3 id=database-definition>Database Definition
<span><a href=#database-definition><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><blockquote><p>A large and persistent collection of (more-or-less similar) pieces of
information organized in a way that facilitates efficient retrieval and
modification.</p></blockquote><h3 id=database-management-system-dbms>Database Management System (DBMS)
<span><a href=#database-management-system-dbms><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><blockquote><p>A program (or set of programs) that manages details related to storage and
access for a database.</p></blockquote><ul><li>Data model</li><li>Access control</li><li>Concurrency control</li><li>Database recovery</li></ul><h3 id=scheme-definition>Scheme Definition
<span><a href=#scheme-definition><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><blockquote><p>A schema is a description of the data interface to the database</p></blockquote><h3 id=database-instance-definition>Database Instance Definition
<span><a href=#database-instance-definition><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><blockquote><p>A database instance is a database (real data) that conforms to a given schema
) i.e., the information stored in the database at a particular moment</p></blockquote><h3 id=levels>Levels
<span><a href=#levels><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Physical</li><li>Virtual</li><li>External</li></ul><h2 id=the-relational-model>The Relational Model
<span><a href=#the-relational-model><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>A database is a collection of relations (tables). Each relation
has a set of attributes (columns). Each attribute has a name and an atomic (indivisible) domain (type). Each relation has a set of tuples (rows).
Duplicate tuples are not allowed. Two tuples are duplicates if all their attributes agree.</p><h3 id=data-model>Data Model
<span><a href=#data-model><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>structure</li><li>operations</li><li>constraints</li></ul><h3 id=schema-and-instance>Schema and Instance
<span><a href=#schema-and-instance><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><pre tabindex=0><code class=language-schema data-lang=schema>author(aid:int, name:string)
publication(pubid:int, title:string)
journal(pubid, volume)
</code></pre><p>A database can be displayed tabularly with a table for each relation.1</p><h3 id=integrity-constraints>Integrity Constraints
<span><a href=#integrity-constraints><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Tuple-Level</p><ul><li>Domain restrictions (e.g. type string)</li><li>Value restriction: only allow subset of values (e.g. <code>["Winter", "Summer", "Fall"]</code>)</li></ul><p>Relation-level</p><ul><li>Superkey: attributes where tuples will never agree on</li><li>Candidate key: minimal superkey (minimal set of attributes that unique identify the tuple)</li><li>Primary key: designated candidate key</li></ul><p>Database-level</p><ul><li>Foreign key: an attribute of this relation is the primary key for another relation (Relation one is <em>referencing</em> and the second relation is <em>referenced</em> )</li><li>Foreign key constraints: Foreign key must match the primary key value of a tuple in the <code>referenced</code> relation</li><li>Referential integrity constraints: foreign key cannot be a primary key in the referencing relation</li></ul><h2 id=the-relational-algebra>The Relational Algebra
<span><a href=#the-relational-algebra><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>Consists of a set of operators</p><h3 id=operators>Operators
<span><a href=#operators><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>one or two relations as inputs</li><li>single output relation in terms of the input relation(s)</li><li>can be composed to express the definition of a new relation in terms of existing relations</li></ul><h3 id=selection>Selection
<span><a href=#selection><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>subset of tuples of a relation and thus schema is the same</p><ul><li>Find teachers who are in the physics department</li><li>conditions include any column of R, comparisons, boolean algebra</li><li>select applies to single row at a time, not many</li></ul><h3 id=projection>Projection
<span><a href=#projection><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Returns a subset of a relation but only of the specified attributes</li><li>Duplicates are eliminated</li></ul><h3 id=cross-product>Cross Product
<span><a href=#cross-product><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Result has attributes of both input relations</li><li>Result is the tuple for each possible pair from relation one and relation two</li></ul><h3 id=conditional-join>Conditional Join
<span><a href=#conditional-join><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Perform cross product but join pairs only if the boolean involving attributes from both relations is true</li></ul><h3 id=natural-join>Natural Join
<span><a href=#natural-join><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>If both relations have the same attribute, then the join will only filter out
tuples that don&rsquo;t have those attributes matching. During the first cross product, duplicate attributes are renamed (e.g. ID, ID -> ID, ID_1) but at the end the duplicated attributes are thrown out.</p><h3 id=set-based-relational-operators>Set-Based Relational Operators
<span><a href=#set-based-relational-operators><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Union: Same number of fields and corresponding fields have the same type</li><li>Difference: Returns stuff in first relation not present in second</li><li>Intersection: Return stuff in both rrelations</li><li>Division: Attributes of second relation must be a subset of the first. Inverse of product. Useful for all. Example (which tuples of X always references Y but returns a new tuple without the attributes in Y).</li></ul><h3 id=summary-of-relational-operators>Summary of Relational Operators
<span><a href=#summary-of-relational-operators><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p><img src=/images/cs-348/relation-operators.png alt="summary of relational operators"></p><h3 id=finding-the-maximums-of-a-relation>Finding the maximums of a relation
<span><a href=#finding-the-maximums-of-a-relation><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>To do this, we find all values in the relation that are smaller than values in itself.
Now that we have all the smaller values, we just need to remove them from the original table.
We are left with values equal to the maximum.</p><p>project val (T) - project t1.val (T t1 join T t2 if t1.val &lt; t2.val)</p><h3 id=algebraic-equivalences>Algebraic Equivalences
<span><a href=#algebraic-equivalences><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><h3 id=relational-completeness>Relational Completeness
<span><a href=#relational-completeness><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><h3 id=the-relational-calculus>The Relational Calculus
<span><a href=#the-relational-calculus><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><h2 id=sql---structured-query-language>SQL - Structured Query Language
<span><a href=#sql---structured-query-language><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>KEYWORD (statements is implied)</p><ul><li>SQL Data Manipulation Language (DML)<ul><li>SELECT for queries</li><li>INSERT, UPDATE, DELETE modify the instance of a table</li></ul></li><li>SQL Data Definition Language (DDL)<ul><li>CREATE, DROP modify the database schema</li></ul></li><li>SQL Data Control Language (DCL)<ul><li>GRANT, REVOKE enforce the security model</li></ul></li></ul><p>Schema used for Examples</p><p><img src=/images/cs-348/database-examples-schema.png alt="database schema"></p><p><a href=https://www.db-book.com/university-lab-dir/sqljs.html>SQL interpreter</a></p><h3 id=data-types>Data Types
<span><a href=#data-types><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>integer or int (32 bit or 4 byte)</li><li>smallint (16 bit or 2 bytes)</li><li>numeric(p, q): p digit numbers with q digits to the right</li><li>real, double precision:</li><li>float(n): user-specified precision of at least n digits</li><li>char(n): fixed length character strings (n is length)</li><li>varchar(n): variable length character to a max length of n</li><li>date: describes year, month, day</li><li>time: describes an hour, minute, second</li><li>timestamp: describes a date and time</li><li>interval: allows date/time computations</li></ul><h3 id=tables>Tables
<span><a href=#tables><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>create</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>table</span><span style=color:#666> </span>r<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span>(A1<span style=color:#666> </span>D1,<span style=color:#666> </span>...,<span style=color:#666> </span>An,<span style=color:#666> </span>Dn),<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span>(integrity-<span style=color:#6ab825;font-weight:700>constraint</span>-<span style=color:#3677a9>1</span>),<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span>...<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span>(integrity-<span style=color:#6ab825;font-weight:700>constraint</span>-k),<span style=color:#666>
</span></span></span></code></pre></div><p>r: relation, A: attribute, D: data type</p><p>integrity-contraints:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>primary</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>key</span><span style=color:#666> </span>(A1,<span style=color:#666> </span>...,<span style=color:#666> </span>An<span style=color:#666> </span>)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>foreign</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>key</span><span style=color:#666> </span>(Am,<span style=color:#666> </span>...,<span style=color:#666> </span>An<span style=color:#666> </span>)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>references</span><span style=color:#666> </span>r2<span style=color:#666>
</span></span></span></code></pre></div><h3 id=queries>Queries
<span><a href=#queries><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>SQL allows duplicate tuples in relations as well as in query results. need to use
the <code>distinct</code> keyword after select.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>SELECT</span><span style=color:#666> </span>[<span style=color:#6ab825;font-weight:700>distinct</span>]<span style=color:#666> </span>dept_name,<span style=color:#666> </span>salary<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666>
</span></span></span></code></pre></div><p>[OPTIONAL]</p><p>To return all attributes, use an asterisk (*)</p><h4 id=arithmetic-expressions>Arithmetic Expressions
<span><a href=#arithmetic-expressions><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>You can operate on the data through the select call itself. For example, if we wanted the monthly salary instead of an annual one:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>ID,<span style=color:#666> </span>name,<span style=color:#666> </span>salary/<span style=color:#3677a9>12</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>monthly_salary<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666>
</span></span></span></code></pre></div><h4 id=filtering-where>Filtering (Where)
<span><a href=#filtering-where><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>dept_name<span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#a61717;background-color:#e3d2d2>’</span>Comp.<span style=color:#666> </span>Sci.<span style=color:#a61717;background-color:#e3d2d2>’</span><span style=color:#666>
</span></span></span></code></pre></div><ul><li>logical connectives: and, or, and not</li><li>comparison operations: &lt;, &lt;=, >, >=, =, and &lt;> (inequality)</li><li>comparisons can be applied to results of arithmetic expressions</li></ul><h4 id=select-cross-product>Select Cross Product
<span><a href=#select-cross-product><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Performs Cross product by specifying multiple relations</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor,<span style=color:#666> </span>teaches<span style=color:#666>
</span></span></span></code></pre></div><p>Use where to join and remove duplicate attributes.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor,<span style=color:#666> </span>teaches<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>(instructor.ID<span style=color:#666> </span>=<span style=color:#666> </span>teaches.ID<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span>instructord.dept_name<span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#ed9d13>&#39;Comp. Sci&#39;</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>year</span><span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#3677a9>2017</span>)<span style=color:#666>
</span></span></span></code></pre></div><h4 id=from-inner-join>FROM Inner Join
<span><a href=#from-inner-join><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>...<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>inner</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>join</span><span style=color:#666> </span>teaches<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>on</span><span style=color:#666> </span>instructor.ID<span style=color:#666> </span>=<span style=color:#666> </span>teaches.ID...<span style=color:#666>
</span></span></span></code></pre></div><p>If attributes have the same name, then both will show up with a <code>relation.</code> prefix</p><h4 id=from-natural-join-clause>FROM Natural Join Clause
<span><a href=#from-natural-join-clause><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>natural</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>join</span><span style=color:#666> </span>teaches<span style=color:#666>
</span></span></span></code></pre></div><p>Be careful since this does it to all attributes. For specific attributes,
use <code>using</code></p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>T<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>join</span><span style=color:#666> </span>S<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>using</span>(A)<span style=color:#666>
</span></span></span></code></pre></div><h4 id=select-as>SELECT as
<span><a href=#select-as><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Renaming the attribute in the query result</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>T.ID,<span style=color:#666> </span>T.name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>T,<span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>S<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>T.salary<span style=color:#666> </span>&gt;<span style=color:#666> </span>S.salary<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span>S.ID<span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#ed9d13>&#39;12121&#39;</span><span style=color:#666>
</span></span></span></code></pre></div><h4 id=string-operations>String Operations
<span><a href=#string-operations><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><ul><li>&lsquo;5"6&rsquo; (allows double quotes)</li><li>&lsquo;Datebase&rsquo; = &lsquo;database&rsquo; (false)</li><li>DBMS might not differentitae (MYSQL)</li><li>concat</li><li>to upper or to lower</li><li>string length, extracting substrings, etc.</li></ul><h4 id=where-like>WHERE like
<span><a href=#where-like><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><ul><li>%: match any substring</li><li>_: match any charater (one)</li><li>escape using <code>escape '%'</code> or <code>escape '_'</code></li></ul><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>WHERE</span><span style=color:#666> </span>attribute<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>like</span><span style=color:#666> </span><span style=color:#ed9d13>&#39;%pattern%&#39;</span><span style=color:#666>
</span></span></span></code></pre></div><h4 id=order>ORDER
<span><a href=#order><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>order</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span>name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>asc</span><span style=color:#666>   </span><span style=color:#999;font-style:italic>-- default is asc
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>order</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span>dept_name,<span style=color:#666> </span>name<span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>desc</span><span style=color:#666>
</span></span></span></code></pre></div><h4 id=union>Union
<span><a href=#union><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>course_id<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>section<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>semester=<span style=color:#a61717;background-color:#e3d2d2>’</span>Fall<span style=color:#a61717;background-color:#e3d2d2>’</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>year</span>=<span style=color:#3677a9>2017</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>union</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>course_id<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>section<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>semester=<span style=color:#a61717;background-color:#e3d2d2>’</span>Spring<span style=color:#a61717;background-color:#e3d2d2>’</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>year</span>=<span style=color:#3677a9>2018</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#999;font-style:italic>-- union all
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>course_id<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>section<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>semester=<span style=color:#a61717;background-color:#e3d2d2>’</span>Fall<span style=color:#a61717;background-color:#e3d2d2>’</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>year</span>=<span style=color:#3677a9>2017</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>union</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>all</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>course_id<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>section<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>semester=<span style=color:#a61717;background-color:#e3d2d2>’</span>Spring<span style=color:#a61717;background-color:#e3d2d2>’</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>year</span>=<span style=color:#3677a9>2018</span><span style=color:#666>
</span></span></span></code></pre></div><h4 id=aggregate-pt-1>Aggregate Pt. 1
<span><a href=#aggregate-pt-1><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><ul><li>avg: average value</li><li>min: minimum value</li><li>max: maximum value</li><li>sum: sum of values</li><li>count: number of values<ul><li>count (*) to count number of tuples
Usage <code>SELECT count(attribute), ...</code></li></ul></li></ul><p>Group by: group tuples into another attribute.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>dept_name,<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>avg</span>(salary)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>group</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span>dept_name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>having</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>avg</span>(salary)<span style=color:#666> </span>&gt;<span style=color:#666> </span><span style=color:#3677a9>25000</span><span style=color:#666>
</span></span></span></code></pre></div><p>The having condition applies on each group and not on the aggregation. The having applies before the select returns but after the grouping.</p><p>Null: null indicates unknown or missing data.</p><p>Comparing null with anything else always results in unknown even with null.</p><p>Unknown always takes precedence.</p><p>Use <code>is null</code> for a null comparison</p><h3 id=subqueries>Subqueries
<span><a href=#subqueries><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Use ( ) to use a temorary relation</p><h4 id=table-subqueries>Table Subqueries
<span><a href=#table-subqueries><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>dept_name,<span style=color:#666> </span>avg_salary<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>(<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>dept_name,<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>avg</span>(salary)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>avg_salary<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>group</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span>dept_name<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span>)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>avg_salary<span style=color:#666> </span>&gt;<span style=color:#666> </span><span style=color:#3677a9>42000</span><span style=color:#666>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>max</span><span style=color:#666> </span>(tot_salary)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>(<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>dept_name,<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>sum</span>(salary)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>tot_salary<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>group</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span>dept_name<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span>)<span style=color:#666>
</span></span></span></code></pre></div><h4 id=scalar-subqueries>Scalar Subqueries
<span><a href=#scalar-subqueries><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>A query that returns a single tuple.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>salary<span style=color:#666> </span>&gt;<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>   </span>(<span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>avg</span>(salary)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor)<span style=color:#666>
</span></span></span></code></pre></div><h4 id=set-membership>Set Membership
<span><a href=#set-membership><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Subquery can also be a hardcoded set</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>x<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>in</span><span style=color:#666> </span>(subquery)<span style=color:#666> </span><span style=color:#999;font-style:italic>/* intersect */</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span>x<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>not</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>in</span><span style=color:#666> </span>(subquery)<span style=color:#666> </span><span style=color:#999;font-style:italic>/* except */</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>distinct</span><span style=color:#666> </span>name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>in</span><span style=color:#666> </span>(<span style=color:#a61717;background-color:#e3d2d2>’</span>Mozart<span style=color:#a61717;background-color:#e3d2d2>’</span>,<span style=color:#666> </span><span style=color:#a61717;background-color:#e3d2d2>’</span>Einstein<span style=color:#a61717;background-color:#e3d2d2>’</span>)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>distinct</span><span style=color:#666> </span>name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>not</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>in</span><span style=color:#666> </span>(<span style=color:#a61717;background-color:#e3d2d2>’</span>Mozart<span style=color:#a61717;background-color:#e3d2d2>’</span>,<span style=color:#666> </span><span style=color:#a61717;background-color:#e3d2d2>’</span>Einstein<span style=color:#a61717;background-color:#e3d2d2>’</span>)<span style=color:#666>
</span></span></span></code></pre></div><p>&lt;> means not equal</p><h4 id=all-clause>All Clause
<span><a href=#all-clause><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>salary<span style=color:#666> </span>&gt;<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>all</span><span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>salary<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>dept_name<span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#ed9d13>&#39;Comp. Sci.&#39;</span>)<span style=color:#666>
</span></span></span></code></pre></div><h4 id=some-at-least-one-clause>Some (at least one) Clause
<span><a href=#some-at-least-one-clause><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>salary<span style=color:#666> </span>&gt;<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>some</span><span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>salary<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>dept_name<span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#ed9d13>&#39;Comp. Sci.&#39;</span>)<span style=color:#666>
</span></span></span></code></pre></div><h4 id=exists-clause>Exists Clause
<span><a href=#exists-clause><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Can also use not exists</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>course_id<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>section<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>S<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>semester<span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#ed9d13>&#39;Fall&#39;</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>year</span><span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#3677a9>2017</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>exists</span><span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>section<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>T<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>semester<span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#ed9d13>&#39;Spring&#39;</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>year</span>=<span style=color:#666> </span><span style=color:#3677a9>2018</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span>S.course_id<span style=color:#666> </span>=<span style=color:#666> </span>T.course_id)<span style=color:#666>
</span></span></span></code></pre></div><h4 id=test-non-empty-relations>Test Non-Empty Relations
<span><a href=#test-non-empty-relations><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Triple query.</p><p>Assert inner query is non-empty (not exists) where inner query does a search based on condition 1 which also asserts it satisfies condition 2 which could be another query.</p><p>Find all students who have taken all courses offered in the Biology department.</p><p>return student if for all biology courses available student has taken that course. -> return students where the following relation is empty (all bio courses except the ones the student has taken)</p><h4 id=unique>Unique
<span><a href=#unique><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Returns true if subquery contains no duplicates (one find). Add <code>not</code> before <code>unique</code> for &ldquo;at least twice&rdquo;</p><details><summary>find all courses that were offered at most once in 2017</summary><p>For all courses, find unique instances where the course was offered in 2017</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>course<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>T<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>unique</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span>(<span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>course<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>R<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>T.course_id<span style=color:#666> </span>=<span style=color:#666> </span>R.course_id<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span>R.<span style=color:#6ab825;font-weight:700>year</span><span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#3677a9>2017</span>)<span style=color:#666>
</span></span></span></code></pre></div></details><h4 id=correlated-subqueries>Correlated Subqueries
<span><a href=#correlated-subqueries><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>For each tuple obtained from the outer query, compute the
inner query. Need to use the <code>lateral</code> prefix to do so.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>name,<span style=color:#666> </span>salary,<span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>avg</span>(salary)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>dept_name<span style=color:#666> </span>=<span style=color:#666> </span>S.dept_name)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>dept_avg<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>S<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>name,<span style=color:#666> </span>salary,<span style=color:#666> </span>dept_avg<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span>T,<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>lateral</span><span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>avg</span>(salary)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>dept_avg<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span>S<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>              </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>T.dept_name<span style=color:#666> </span>=<span style=color:#666> </span>S.dept_name)<span style=color:#666>
</span></span></span></code></pre></div><h4 id=with-clause>With Clause
<span><a href=#with-clause><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>with temp_relation (list_of_attributes) as (subquery)</p><p>Find all departments where the total salary is greater than the
average of the total salary at all departments</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>with</span><span style=color:#666> </span>dept_total<span style=color:#666> </span>(dept_name,<span style=color:#666> </span>value)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>dept_name,<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>sum</span>(salary)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>            </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>group</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span>dept_name),<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>        </span>dept_total_avg<span style=color:#666> </span>(value)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>avg</span>(value)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>dept_total)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>dept_name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>dept_total,<span style=color:#666> </span>dept_total_avg<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>dept_total.value<span style=color:#666> </span>&gt;<span style=color:#666> </span>dept_total_avg.value<span style=color:#666>
</span></span></span></code></pre></div><h3 id=data-modifications>Data Modifications
<span><a href=#data-modifications><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>alter</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>table</span><span style=color:#666> </span>r<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>add</span><span style=color:#666> </span>attribute<span style=color:#666> </span>data_typ<span style=color:#666>
</span></span></span></code></pre></div><p>Existing tuples in <code>r</code> will have <code>null</code> as the value for the new attribute</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>alter</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>table</span><span style=color:#666> </span>r<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>drop</span><span style=color:#666> </span>A<span style=color:#666>
</span></span></span></code></pre></div><ul><li>Not supported on many databases like <code>SQLite</code></li></ul><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>alter</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>table</span><span style=color:#666> </span>r<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>rename</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>column</span><span style=color:#666> </span>old_name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>to</span><span style=color:#666> </span>new_name<span style=color:#666>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>alter</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>table</span><span style=color:#666> </span>r<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>modify</span><span style=color:#666> </span>A<span style=color:#666> </span>data_typ<span style=color:#666>
</span></span></span></code></pre></div><h4 id=deleting-a-table>Deleting a Table
<span><a href=#deleting-a-table><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>drop</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>table</span><span style=color:#666> </span>instructor<span style=color:#666>
</span></span></span></code></pre></div><h4 id=removing-from-table>Removing from Table
<span><a href=#removing-from-table><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Remove all:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>delete</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>delete</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>dept_name=<span style=color:#666> </span><span style=color:#a61717;background-color:#e3d2d2>’</span>Finance<span style=color:#a61717;background-color:#e3d2d2>’</span><span style=color:#666>
</span></span></span></code></pre></div><details><summary>Delete instructors who earn less than the average</summary><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>delete</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>salary<span style=color:#666> </span>&lt;<span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>avg</span>(salary)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor)<span style=color:#666>
</span></span></span></code></pre></div></details><br><h4 id=insertion>Insertion
<span><a href=#insertion><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>insert</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>into</span><span style=color:#666> </span>course<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>values</span><span style=color:#666> </span>(<span style=color:#a61717;background-color:#e3d2d2>’</span>CS-<span style=color:#3677a9>437</span><span style=color:#a61717;background-color:#e3d2d2>’</span>,<span style=color:#666> </span><span style=color:#a61717;background-color:#e3d2d2>’</span><span style=color:#6ab825;font-weight:700>Database</span><span style=color:#666> </span>Systems<span style=color:#a61717;background-color:#e3d2d2>’</span>,<span style=color:#666> </span><span style=color:#a61717;background-color:#e3d2d2>’</span>Comp.<span style=color:#666> </span>Sci.<span style=color:#a61717;background-color:#e3d2d2>’</span>,<span style=color:#666> </span><span style=color:#3677a9>4</span>)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>insert</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>into</span><span style=color:#666> </span>course<span style=color:#666> </span>(course_id,<span style=color:#666> </span>title,<span style=color:#666> </span>dept_name,<span style=color:#666> </span>credits)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>values</span><span style=color:#666> </span>(<span style=color:#a61717;background-color:#e3d2d2>’</span>CS-<span style=color:#3677a9>437</span><span style=color:#a61717;background-color:#e3d2d2>’</span>,<span style=color:#666> </span><span style=color:#a61717;background-color:#e3d2d2>’</span><span style=color:#6ab825;font-weight:700>Database</span><span style=color:#666> </span>Systems<span style=color:#a61717;background-color:#e3d2d2>’</span>,<span style=color:#666> </span><span style=color:#a61717;background-color:#e3d2d2>’</span>Comp.<span style=color:#666> </span>Sci.<span style=color:#a61717;background-color:#e3d2d2>’</span>,<span style=color:#666> </span><span style=color:#3677a9>4</span>)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>insert</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>into</span><span style=color:#666> </span>student<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>values</span><span style=color:#666> </span>(<span style=color:#a61717;background-color:#e3d2d2>’</span><span style=color:#3677a9>3003</span><span style=color:#a61717;background-color:#e3d2d2>’</span>,<span style=color:#666> </span><span style=color:#a61717;background-color:#e3d2d2>’</span>Green<span style=color:#a61717;background-color:#e3d2d2>’</span>,<span style=color:#666> </span><span style=color:#a61717;background-color:#e3d2d2>’</span>Finance<span style=color:#a61717;background-color:#e3d2d2>’</span>,<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>null</span>)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>insert</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>into</span><span style=color:#666> </span>student<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>values</span><span style=color:#666> </span>(<span style=color:#a61717;background-color:#e3d2d2>’</span><span style=color:#3677a9>3003</span><span style=color:#a61717;background-color:#e3d2d2>’</span>,<span style=color:#666> </span><span style=color:#a61717;background-color:#e3d2d2>’</span>Green<span style=color:#a61717;background-color:#e3d2d2>’</span>,<span style=color:#666> </span><span style=color:#a61717;background-color:#e3d2d2>’</span>Finance<span style=color:#a61717;background-color:#e3d2d2>’</span>)<span style=color:#666> </span><span style=color:#999;font-style:italic>/* omitted values will be null */</span><span style=color:#666>
</span></span></span></code></pre></div><p>Inserting into new table from another based on some condition. Note that without
a primary key on the student table, there would be a infinite tuples added.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>insert</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>into</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>ID,<span style=color:#666> </span>name,<span style=color:#666> </span>dept_name,<span style=color:#666> </span><span style=color:#3677a9>18000</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>student<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>dept_name<span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#a61717;background-color:#e3d2d2>’</span>Music<span style=color:#a61717;background-color:#e3d2d2>’</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span>total_cred<span style=color:#666> </span>&gt;<span style=color:#666> </span><span style=color:#3677a9>144</span><span style=color:#666>
</span></span></span></code></pre></div><h4 id=updates>Updates
<span><a href=#updates><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>update</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>set</span><span style=color:#666> </span>salary<span style=color:#666> </span>=<span style=color:#666> </span>salary<span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#3677a9>1</span>.<span style=color:#3677a9>05</span>;<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>update</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>set</span><span style=color:#666> </span>salary<span style=color:#666> </span>=<span style=color:#666> </span>salary<span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#3677a9>1</span>.<span style=color:#3677a9>05</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>salary<span style=color:#666> </span>&lt;<span style=color:#666> </span><span style=color:#3677a9>70000</span>;<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>update</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>set</span><span style=color:#666> </span>salary<span style=color:#666> </span>=<span style=color:#666> </span>salary<span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#3677a9>1</span>.<span style=color:#3677a9>05</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>salary<span style=color:#666> </span>&lt;<span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>avg</span><span style=color:#666> </span>(salary)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor);<span style=color:#666>
</span></span></span></code></pre></div><p>Update instructor salaries based on how much they make (multiple queries):</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>update</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>set</span><span style=color:#666> </span>salary<span style=color:#666> </span>=<span style=color:#666> </span>salary<span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#3677a9>1</span>.<span style=color:#3677a9>03</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>salary<span style=color:#666> </span>&gt;<span style=color:#666> </span><span style=color:#3677a9>100000</span>;<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>update</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>set</span><span style=color:#666> </span>salary<span style=color:#666> </span>=<span style=color:#666> </span>salary<span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#3677a9>1</span>.<span style=color:#3677a9>05</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>salary<span style=color:#666> </span>&lt;=<span style=color:#666> </span><span style=color:#3677a9>100000</span>;<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#999;font-style:italic>/* alternative using case */</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>update</span><span style=color:#666> </span>instructor<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>set</span><span style=color:#666> </span>salary<span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>case</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>when</span><span style=color:#666> </span>salary<span style=color:#666> </span>&lt;=<span style=color:#666> </span><span style=color:#3677a9>100000</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>then</span><span style=color:#666> </span>salary<span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#3677a9>1</span>.<span style=color:#3677a9>05</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>     </span><span style=color:#6ab825;font-weight:700>else</span><span style=color:#666> </span>salary<span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#3677a9>1</span>.<span style=color:#3677a9>03</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>end</span><span style=color:#666>
</span></span></span></code></pre></div><h2 id=sql-intermediate-topics>SQL Intermediate Topics
<span><a href=#sql-intermediate-topics><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><h3 id=check-constraints>Check Constraints
<span><a href=#check-constraints><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>create</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>table</span><span style=color:#666> </span>department<span style=color:#666> </span>(<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span>...<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span>budget<span style=color:#666> </span><span style=color:#24909d>numeric</span><span style=color:#666> </span>(<span style=color:#3677a9>12</span>,<span style=color:#3677a9>2</span>)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>check</span><span style=color:#666> </span>(budget<span style=color:#666> </span>&gt;<span style=color:#666> </span><span style=color:#3677a9>0</span>),<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span>...<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span>)<span style=color:#666>
</span></span></span></code></pre></div><h3 id=foreign-key-contraints>Foreign Key Contraints
<span><a href=#foreign-key-contraints><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>create</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>table</span><span style=color:#666> </span>instructor<span style=color:#666> </span>(<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span>...<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span>dept_name<span style=color:#666> </span><span style=color:#24909d>varchar</span>(<span style=color:#3677a9>20</span>)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span>...<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>foreign</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>key</span><span style=color:#666> </span>(dept_name)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>references</span><span style=color:#666> </span>department<span style=color:#666> </span>)<span style=color:#666>
</span></span></span></code></pre></div><h3 id=deleting-in-referenced-relation>Deleting in Referenced Relation
<span><a href=#deleting-in-referenced-relation><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>When creating a table, we can use the <code>references R on delete set null</code></p><p>Cascade: <code>on delete cascade</code> rows referencing key also get deleted</p><h3 id=views>Views
<span><a href=#views><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>virtual table</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>create</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>view</span><span style=color:#666> </span>faculty<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>ID,<span style=color:#666> </span>name,<span style=color:#666> </span>dept_name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor<span style=color:#666>
</span></span></span></code></pre></div><p>We can use views to hide data</p><h4 id=modifying-views>Modifying Views
<span><a href=#modifying-views><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>create</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>view</span><span style=color:#666> </span>instructor_info<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>ID,<span style=color:#666> </span>name,<span style=color:#666> </span>building<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>instructor,<span style=color:#666> </span>department<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>instructor.dept_name<span style=color:#666> </span>=<span style=color:#666> </span>department.dept_name;<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#999;font-style:italic>-- insert into instructor_info values(&#39;69987&#39;, &#39;White&#39;, &#39;Taylor&#39;); -- won&#39;t work
</span></span></span></code></pre></div><h4 id=updateable-views>Updateable Views
<span><a href=#updateable-views><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><h3 id=access-control>Access Control
<span><a href=#access-control><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><h4 id=roles>Roles
<span><a href=#roles><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><h3 id=indexes>Indexes
<span><a href=#indexes><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>An index is an auxiliary persistent data structure<ul><li>Search tree (e.g., B+-tree), lookup table (e.g., hash table), etc</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>create</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>index</span><span style=color:#666> </span>ins_name_index<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>on</span><span style=color:#666> </span>instructor<span style=color:#666> </span>(name);<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>create</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>unique</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>index</span><span style=color:#666> </span>ins_name_index<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>on</span><span style=color:#666> </span>instructor<span style=color:#666> </span>(name);<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>drop</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>index</span><span style=color:#666> </span>ins_name_index<span style=color:#666>
</span></span></span></code></pre></div><p>Typically the index already exists on primary key and unique constraints.</p><h3 id=sql-relational-division>SQL Relational Division
<span><a href=#sql-relational-division><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>TODO: double check if this is correct.</p><p>Assumes <code>model</code> is distinct (primary key). If model was not distinct, you would have to add the distinct keyword in the subquery as well
as the ending count.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>SELECT</span><span style=color:#666> </span>maker<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>FROM</span><span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>SELECT</span><span style=color:#666> </span>maker,<span style=color:#666> </span>model<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>FROM</span><span style=color:#666> </span>Product<span style=color:#666> </span>A<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>join</span><span style=color:#666> </span>Printer<span style=color:#666> </span>B<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>USING</span>(model)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>WHERE</span><span style=color:#666> </span>color=<span style=color:#6ab825;font-weight:700>True</span>)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>group</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span>maker<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>HAVING</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>COUNT</span>(*)<span style=color:#666> </span>=<span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>SELECT</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>COUNT</span>(*)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>FROM</span><span style=color:#666> </span>Printer<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>WHERE</span><span style=color:#666> </span>color=<span style=color:#6ab825;font-weight:700>true</span>)<span style=color:#666>
</span></span></span></code></pre></div><h2 id=sql-drivers>SQL Drivers
<span><a href=#sql-drivers><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><h3 id=prepared-statements>Prepared Statements
<span><a href=#prepared-statements><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Compile once and reuse multiple times. Avoids SQL Injection.</p><h3 id=metadata-features>Metadata Features
<span><a href=#metadata-features><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><h2 id=functions-and-procedures>Functions and Procedures
<span><a href=#functions-and-procedures><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>create</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>function</span><span style=color:#666> </span>func_name(param_decls)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>returns</span><span style=color:#666> </span>return_type<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>create</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>procedure</span><span style=color:#666> </span>proc_name(param_decls)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>call</span><span style=color:#666> </span>proc_name(params)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>set</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>variable</span><span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>call</span><span style=color:#666> </span>func_name(params)<span style=color:#666>
</span></span></span></code></pre></div><p>Procedures do not have return values, rather they use out parameters. Additionally, parameters can modify whereas functions are read only. Procedures can call other procedures and functions but functions cannot call functions nor procedures. You can use functions as if they are tables/views but</p><h2 id=triggers>Triggers
<span><a href=#triggers><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>Event-Condition-Action</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>create</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>trigger</span><span style=color:#666> </span>timeslot_check<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>after</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>insert</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>on</span><span style=color:#666> </span>section<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>referencing</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>new</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>row</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>nrow<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>for</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>each</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>row</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#999;font-style:italic>/*time_slot_id not present in time_slot */</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>when</span><span style=color:#666> </span>(nrow.time_slot_id<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>not</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>in</span><span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>time_slot_id<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>time_slot))<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>begin</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>rollback</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>end</span>;<span style=color:#666>
</span></span></span></code></pre></div><ul><li>Can be before or after</li><li>For each statement is also possible but only applies to after triggers<ul><li>Useful for SQL statements that update a larger number of rows</li></ul></li></ul><h2 id=ranking>Ranking
<span><a href=#ranking><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>ID,<span style=color:#666> </span>rank()<span style=color:#666> </span>over<span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>order</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span>(GPA)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>desc</span>)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>s_rank<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>student_grade<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>order</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span>s_rank;<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>ID,<span style=color:#666> </span>dept_name,<span style=color:#666> </span>rank()<span style=color:#666> </span>over<span style=color:#666> </span>(partition<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span>dept_name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>order</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span>(GPA)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>desc</span>)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>dept_rank<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>student_grade<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>order</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span>dept_name,<span style=color:#666> </span>dept_rank;<span style=color:#666>
</span></span></span></code></pre></div><h2 id=windowing-moving>Windowing (Moving)
<span><a href=#windowing-moving><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>year</span>,<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>avg</span>(num_credits)<span style=color:#666> </span>over<span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>order</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>year</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>rows</span><span style=color:#666> </span><span style=color:#3677a9>2</span><span style=color:#666> </span>preceding)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>avg_total_credits<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>tot_credits;<span style=color:#666>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>year</span>,<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>avg</span>(num_credits)<span style=color:#666> </span>over<span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>order</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>year</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>rows</span><span style=color:#666> </span>unbounded<span style=color:#666> </span>preceding)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>avg_total_credits<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>tot_credits;<span style=color:#666>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>dept_name,<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>year</span>,<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>avg</span>(num_credits)<span style=color:#666> </span>over<span style=color:#666> </span>(partition<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span>dept_name<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>order</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>year</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>rows</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>between</span><span style=color:#666> </span><span style=color:#3677a9>2</span><span style=color:#666> </span>preceding<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>current</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>row</span>)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>avg_total_credits<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>tot_credits_depth;<span style=color:#666>
</span></span></span></code></pre></div><h2 id=pivoting>Pivoting
<span><a href=#pivoting><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><ul><li>a cross-tabulation view of tables</li></ul><h2 id=rollup-and-cube>Rollup and Cube
<span><a href=#rollup-and-cube><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><ul><li>multidimensional data aggregation</li></ul><h2 id=recursion>Recursion
<span><a href=#recursion><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>with</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>recursive</span><span style=color:#666> </span>rec_prereq(course_id,<span style=color:#666> </span>prereq_id)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>course_id,<span style=color:#666> </span>prereq_id<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>prereq<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>union</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>rec_prereq.course_id,<span style=color:#666> </span>prereq.prereq_id<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>rec_prereq,<span style=color:#666> </span>prereq<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666> </span>rec_prereq.prereq_id<span style=color:#666> </span>=<span style=color:#666> </span>prereq.course_id)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>rec_prereq;<span style=color:#666>
</span></span></span></code></pre></div><h2 id=entity-relationship-model>Entity-Relationship Model
<span><a href=#entity-relationship-model><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><h3 id=database-design>Database Design
<span><a href=#database-design><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><h4 id=understand-the-real-world-domain-being-modeled>Understand the real-world domain being modeled
<span><a href=#understand-the-real-world-domain-being-modeled><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><ul><li>E-R model</li></ul><h4 id=translate-the-specification-to-the-data-model-of-dbms>Translate the specification to the data model of DBMS
<span><a href=#translate-the-specification-to-the-data-model-of-dbms><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><ul><li>The relational model</li></ul><h3 id=complex-attributes>Complex Attributes
<span><a href=#complex-attributes><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Primary key: underlined</li><li>Composite attributes can be shown by indenting the individual attributes that make it up (nestable)</li><li>Use brackets for multi-valued attributes</li><li>Use ( ) suffix to state that the attribute is derived</li></ul><h3 id=mapping-cardinality>Mapping Cardinality
<span><a href=#mapping-cardinality><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><h4 id=participation>Participation
<span><a href=#participation><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Use a double line to show that all values are participating and use single line for partial participation.</p><h3 id=primary-keys-in-e-r-model>Primary Keys in E-R Model
<span><a href=#primary-keys-in-e-r-model><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p><img src=/images/cs-348/keys_for_er_sets alt="Primary Keys for Relationship Sets"></p><h4 id=weak-entity-sets>Weak Entity Sets
<span><a href=#weak-entity-sets><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>A weak entity set is one whose existence is dependent on another entity,
called its identifying entity. An entity set that is not a weak entity set is
termed a strong entity set.</p><h3 id=removing-redundant-attributes-in-entity-sets>Removing Redundant Attributes in Entity Sets
<span><a href=#removing-redundant-attributes-in-entity-sets><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>identifying entity sets</li><li>adding attributes to entity sets</li><li>forming the relationship sets among the various entity sets</li></ul><h3 id=specialization>Specialization
<span><a href=#specialization><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><h4 id=overlapping-specialization>Overlapping Specialization
<span><a href=#overlapping-specialization><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Use separate arrows</p><h4 id=disjoint-specialization>Disjoint Specialization
<span><a href=#disjoint-specialization><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>One arrow from multiple tables</p><h4 id=completeness-constraints>Completeness Constraints
<span><a href=#completeness-constraints><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Total specialization: Each entity in the higher-level entity set must be present in at least one lower-level entity set. Requires annotating an arrow.</p><p>Partial specialization (default): Membership of a lower-level entity set is not required</p><h3 id=common-mistakes>Common Mistakes
<span><a href=#common-mistakes><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>use of primary key of an entity set as an <strong>attribute</strong> of another entity set instead of using a relatioship</li><li></li></ul><h2 id=e-r-diagram-to-relational-tables>E-R Diagram to Relational Tables
<span><a href=#e-r-diagram-to-relational-tables><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><ul><li>Each entity set maps to a new table</li><li>Each relationship set maps to a new table</li><li>Each simple and single-valued attribute maps to a new column</li></ul><h2 id=schema-refinement-dependencies>Schema Refinement: Dependencies
<span><a href=#schema-refinement-dependencies><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><h3 id=example>Example
<span><a href=#example><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Similar to a question in assignment 2</p><p>See <a href=https://learn.uwaterloo.ca/d2l/le/content/868878/viewContent/4839309/View>slides</a></p><h3 id=single-table-schema>Single-Table Schema
<span><a href=#single-table-schema><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>update problems (how to update values of a single column)</li><li>insert problems (adding new subset of tuple)</li><li>delete problems</li><li>likely increases space requirements</li></ul><h3 id=too-many-tables>Too many Tables
<span><a href=#too-many-tables><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>If there are too many tables, the information of relationships is lost</p><h3 id=functional-dependencies-armstrongs-axioms>Functional Dependencies: Armstrong&rsquo;s Axioms
<span><a href=#functional-dependencies-armstrongs-axioms><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Two ways, first is armstrong&rsquo;s axioms</p><h4 id=reflexivity>Reflexivity
<span><a href=#reflexivity><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>SIN, EName -> EName</p><h4 id=augmentation>Augmentation
<span><a href=#augmentation><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>If X is a subset of Y, then X -> Y.</p><p>SIN, Z -> EName, Z</p><h4 id=transitivity>Transitivity
<span><a href=#transitivity><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>X -> Y, Y -> Z => X -> Z</p><h4 id=union-rule>Union Rule
<span><a href=#union-rule><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>X -> Y, X -> Z => X => YZ</p><h4 id=decomposition>Decomposition
<span><a href=#decomposition><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>X -> YZ => X -> Y, X -> Z</p><h3 id=function-dependencies-attribute-closure>Function Dependencies: Attribute Closure
<span><a href=#function-dependencies-attribute-closure><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p><a href=https://littleflowercollege.edu.in/upload/e_contents/files/187d8c7967172ef5cc75d9b2a709d6cf.pdf>https://littleflowercollege.edu.in/upload/e_contents/files/187d8c7967172ef5cc75d9b2a709d6cf.pdf</a> ?</p><h3 id=schema-decomposition>Schema Decomposition
<span><a href=#schema-decomposition><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><h4 id=lossless-decomposition>Lossless Decomposition
<span><a href=#lossless-decomposition><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>A decomposition {R1, R2} of R is lossless if and only if the common attributes
of R1 and R2 form a superkey for either schema, that is</p><h4 id=dependency-preserving-decompositions>Dependency-preserving Decompositions
<span><a href=#dependency-preserving-decompositions><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>If we have functional dependencies, we should be able to still prove those dependencies valid without having to join.</p><h4 id=boyce-codd-normal-form-bcnf-decomposition>Boyce-Codd Normal Form (BCNF) Decomposition
<span><a href=#boyce-codd-normal-form-bcnf-decomposition><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><blockquote><p>Informally, a relation schema R is in BCNF if and only if
any group of attributes in R that functionally determines
any other attributes in R functionally determines all attributes in R ,
i.e., that group of attributes is a superkey of R</p></blockquote><p>Algorithm:</p><ul><li>Find a BCNF violation</li><li>Decompose the relation into two relations, one being the premise + consequence, the other being premise + attributes not determined</li></ul><h4 id=third-normal-form-3nf>Third Normal Form (3NF)
<span><a href=#third-normal-form-3nf><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Minimal cover:</p><ol><li>Every RHS of a dependency in F is a single attribute</li><li>There does not exist an FD X -> A in F such that the set F - {X -> A} = F. (no redundant FD)</li><li>There are no redundant attributes in the LHS set of a FD in F</li></ol><h2 id=transactions>Transactions
<span><a href=#transactions><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><h3 id=transaction>Transaction
<span><a href=#transaction><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>A transaction i consists of r_i[x] and w_i[y] and c_i</p><h3 id=execution-history>Execution History
<span><a href=#execution-history><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>A database is a shared resource that is accessed by many users and processes.
If data is accessed or modified concurrently, the information may be outdated or one of the modifications will be lost.</p><p>Step 1: check if both transaction histories are over the same set of transactions</p><p>Step 2: check if all conflicting pairs (reads and writes for same attribute from different transactions) are in the same order (&lt; or >).</p><h3 id=serial-execution-histories>Serial Execution HIstories
<span><a href=#serial-execution-histories><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>For a given transaction history, a transactions operations must be consecutive and operations from different transactions may not be interleaved.</p><h4 id=serial-history>Serial History
<span><a href=#serial-history><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Example:</p><p>T<sub>1</sub>, T<sub>2</sub>, T<sub>3</sub></p><h3 id=sql-isolation-levels>SQL Isolation Levels
<span><a href=#sql-isolation-levels><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><h2 id=indexing>Indexing
<span><a href=#indexing><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><ul><li>Tables of a database are stored in blocks (containing multiple rows) on disks<ul><li>Caching is used (memory buffer pool, writing dirty blocks to disk)</li></ul></li><li>Sequential reads are faster than random reads</li><li>Indexes can be used to reduce number of blocks read from possibly all to just a few to access a specific row</li><li>Indexes can be used to speed up the access of a range of rows</li><li>Primary keys are always indexed</li></ul><h3 id=index-structure>Index Structure
<span><a href=#index-structure><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><h2 id=transaction-processing>Transaction Processing
<span><a href=#transaction-processing><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><h3 id=concurrency-control---isolation>Concurrency Control - Isolation
<span><a href=#concurrency-control---isolation><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Pessimistic - assume conflicts will occur and prevent them<ul><li>Two-phase locking (2PL)</li><li>Timestamp ordering</li></ul></li><li>Optimistic - assume that conflicts are rare and run transactions and fix problems that occur</li></ul><h4 id=locking>Locking
<span><a href=#locking><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Shared (read) locks and exclusive (write) locks.</p><ul><li>a transaction that wants to read an object must acquire a shared lock (S mode) on that object</li><li>a transaction that wants to modify an object must acquire an exclusive lock on that object</li><li>object can be locked by multiple shared or only once as exclusive</li><li>not enough for transactions that were meant to preserve a condition such as two objects being the same value</li></ul><h3 id=two-phase-locking>Two-Phase Locking
<span><a href=#two-phase-locking><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>In phase one, transaction obtain locks and do not release locks. The lock point is when the final lock has been obtained.
In phase two, transactions release locks and do not obtain locks. Two phase locking guarantees a conflict-serializable schedule.</p><h4 id=cascading-aborts>Cascading Aborts
<span><a href=#cascading-aborts><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>If a transaction has read uncommitted data read by a transaction that has aborted, it must abort itself.</p><h4 id=deadlocks>Deadlocks
<span><a href=#deadlocks><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Gradual lock release?</p><h3 id=recovery---atomicity-and-durability>Recovery - Atomicity and Durability
<span><a href=#recovery---atomicity-and-durability><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><h4 id=naïve-approaches>Naïve Approaches
<span><a href=#na%c3%afve-approaches><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><ul><li>Force (writes must be reflected on disk when a transaction commits)</li><li>No Steal (flush to disk only at commit)</li></ul><h3 id=logging>Logging
<span><a href=#logging><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Write to disk just before (WAL: write ahead logging) an object is modified</li></ul><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>&lt;T_i, start&gt;
</span></span><span style=display:flex><span>&lt;T_i, X, old_value, new-value&gt;
</span></span><span style=display:flex><span>&lt;T_i, commit&gt; or &lt;T_i, abort&gt;
</span></span></code></pre></div><h4 id=checkpointing>Checkpointing
<span><a href=#checkpointing><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><p>Shortens the amount of log that need to be undone or redone
when a failure occurs</p><ol><li>Output onto stable storage all log records currently residing in main memory</li><li>Output to the disk all modified buffer blocks</li><li>Output onto stable storage a log record of the form &lt;checkpoint L>, where L is a list of transactions active at the time of the checkpoint</li></ol><h2 id=data-analytics-warehousing-and-mining>Data Analytics: Warehousing and Mining
<span><a href=#data-analytics-warehousing-and-mining><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><h3 id=online-transactional-processing-oltp>Online Transactional Processing (OLTP)
<span><a href=#online-transactional-processing-oltp><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>simple queries</li><li>many short transactions making small changes</li><li>Systems tuned to maximize throughput of concurrent transactions</li></ul><h3 id=data-analytics>Data Analytics
<span><a href=#data-analytics><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>the processing of data to infer patterns, correlations, or
models for prediction. Used to make business decisions.</p><ol><li>Gather data<ul><li>Extraction-transform-load</li></ul></li><li>Generate aggregates and reports summarizing data</li><li>Build predictive models</li></ol><h3 id=data-warehouses>Data Warehouses
<span><a href=#data-warehouses><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><h4 id=creating-and-maintaining-a-warehouse>Creating and Maintaining a Warehouse
<span><a href=#creating-and-maintaining-a-warehouse><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><ul><li>Extract: queries</li><li>Clean: delete or repair tuples</li><li>Transform: reorg</li><li>Load: populate the warehouse tables</li></ul><h4 id=warehouse-schemas>Warehouse Schemas
<span><a href=#warehouse-schemas><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><ul><li>Fact tables</li><li>Dimension tables: additional tables for each fact tables</li><li>Measure attributes: value based</li><li>Dimension attributes: relation based</li></ul><h2 id=big-data>Big Data
<span><a href=#big-data><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>Very large volumes of data being collected. Web logs were an early source of data.</p><h3 id=mapreduce>MapReduce
<span><a href=#mapreduce><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Map<ul><li>User-defined functions</li><li>Process input key/value pairs</li><li>Intermediate key/value pairs</li></ul></li><li>Reduce<ul><li>User-defined functions</li><li>Intermediate key/value as inputs</li><li>Merges values for a key</li></ul></li></ul><h3 id=hadoop>Hadoop
<span><a href=#hadoop><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Develoepd by Yahoo!</li><li>Hadoop distributed file system (HDFS)<ul><li>Multiple data nodes</li><li>Name nodes store list of block identifiers and machines that have a copy of the block</li></ul></li></ul><h3 id=apache-spark>Apache Spark
<span><a href=#apache-spark><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Better for iterative computations</li><li>Fault-tolerant and scalable</li></ul><h4 id=reliable-distributed-dataset-rdd>Reliable Distributed Dataset (RDD)
<span><a href=#reliable-distributed-dataset-rdd><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><ul><li>Resilient: if data in memory is lost, recreate</li><li>Distributed: stored in memory across cluster</li><li>Dataset: from a file on HDFS or programmatic</li></ul><p>Lineage information retained to reconstruct lost data. Lineage is stored as an object and stored persistently.</p><h4 id=caching>Caching
<span><a href=#caching><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><h4 id=transformation-and-action>Transformation and Action
<span><a href=#transformation-and-action><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><h2 id=nosql-systems>NoSQL Systems
<span><a href=#nosql-systems><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>Many new application do not require full machinery that relational DBMS&rsquo;s provide; more so web-based.</p><ul><li>Specialized<ul><li>Column (BigTable)</li><li>Key-value (DyanmoDB)</li><li>document (MongoDB)</li><li>graph (Neo4J)<ul><li>Graph DBMSs are transitioning from NoSQL systems to systems implemented
on top of RDBMSs</li></ul></li></ul></li><li>Objectives<ul><li>Simplicity (schema-less)</li><li>Scalability and performance</li><li>Flexibility for the programmer</li></ul></li></ul><h3 id=cap-theorem>CAP Theorem
<span><a href=#cap-theorem><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Distributed data store, only 2 of 3 are ensured</p><ul><li>Consistency<ul><li>All clients always have the same view of data</li></ul></li><li>Availability<ul><li>Each client can always read and write</li></ul></li><li>Partition tolerance<ul><li>System works well despite network partitions</li></ul></li></ul><p>Example, two nodes can&rsquo;t communicate with each other, a write is done one node one and a read is done on node 2. What should node 2 do? Return inconsistent data or stay unavailable.</p><p>NoSQL trades consistency for higher availability.</p><ul><li>Database community value consistency (ACID)</li><li>Distributed systems value uptime</li></ul><h4 id=strong-vs-eventual-consistency>Strong vs. Eventual Consistency
<span><a href=#strong-vs-eventual-consistency><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><ul><li>Strong (ACID)<ul><li>All nodes hold the same values</li></ul></li><li>Eventual<ul><li>Nodes may hold different values but will catch up</li></ul></li></ul><h3 id=key-value-stores>Key-Value Stores
<span><a href=#key-value-stores><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Key = unique id, Value = text, binary data, structured data, etc.</p><ul><li>Simple queries<ul><li>Put(key, value): inserts a (key, value) pair</li><li>get(key): returns value associated with key</li><li>get_range(key1, key2): { (key, value) }</li></ul></li></ul><h3 id=amazon-dynamodb>Amazon DynamoDB
<span><a href=#amazon-dynamodb><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Data model (key, structured value)<ul><li>Simple queries on key and attributes</li><li>key is hash or hash and range</li></ul></li></ul><h3 id=mongodb>MongoDB
<span><a href=#mongodb><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>JSON documents</li><li>db.collection.function (JSON expression)</li></ul><h3 id=google-bigtable>Google BigTable
<span><a href=#google-bigtable><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Distributed, multi-dimensional, persistent, sparse, sorted map</li><li>Data model: { row and column }</li><li>Transactional atomicity only for single row update</li></ul><h3 id=graph-dbmss>Graph DBMSs
<span><a href=#graph-dbmss><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><ul><li>Many applications (Fraud detection, recommendation engines, AI knowledge gaps, social networks)</li></ul><h4 id=neo4j>Neo4J
<span><a href=#neo4j><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h4><ul><li>Property graphs<ul><li>Vertices, edges, labels, and properties</li></ul></li><li>Linked list on disk</li></ul></div><div class=post-info><div class="post-date dt-published">2023-Jan-10</div><a class="post-hidden-url u-url" href=https://blog.elijahlopez.ca/posts/cs-348-intro-to-database-management/>https://blog.elijahlopez.ca/posts/cs-348-intro-to-database-management/</a>
<a href=https://blog.elijahlopez.ca/ class="p-name p-author post-hidden-author h-card" rel=me>Elijah Lopez</a><div class=post-taxonomies><ul class=post-tags><li><a href=https://blog.elijahlopez.ca/tags/university/>#university</a></li></ul></div></div></article><div class="pagination post-pagination"><div class="left pagination-item"><a href=/posts/starting-systemd-services-without-root/>Starting Systemd Services Without Root</a></div><div class="right pagination-item"><a href=/posts/cs-350-operating-systems/>CS 350 Operating Systems</a></div></div><script src=https://utteranc.es/client.js repo=elibroftw/blog.elijahlopez.ca theme=github-dark label issue-term=url crossorigin=anonymous async></script></main><footer class=common-footer><div class=common-footer-bottom><div class=copyright><p>© Elijah Lopez, 2023<br>Powered by <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, theme <a target=_blank rel="noopener noreferrer" href=https://github.com/mitrichius/hugo-theme-anubis>Anubis</a>.<br></p></div><script>const STORAGE_KEY="user-color-scheme",defaultTheme="dark-without-switcher";let currentTheme,switchButton,autoDefinedScheme=window.matchMedia("(prefers-color-scheme: dark)");const autoChangeScheme=e=>{currentTheme=e.matches?"dark":"light",document.documentElement.setAttribute("data-theme",currentTheme),changeButtonText()};document.addEventListener("DOMContentLoaded",function(){switchButton=document.querySelector(".theme-switcher"),currentTheme=detectCurrentScheme(),currentTheme=="dark"&&document.documentElement.setAttribute("data-theme","dark"),currentTheme=="auto"&&(autoChangeScheme(autoDefinedScheme),autoDefinedScheme.addListener(autoChangeScheme)),switchButton&&(changeButtonText(),switchButton.addEventListener("click",switchTheme,!1)),showContent()});function detectCurrentScheme(){return localStorage!==null&&localStorage.getItem(STORAGE_KEY)?localStorage.getItem(STORAGE_KEY):defaultTheme?defaultTheme:window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"light"}function changeButtonText(){switchButton&&(switchButton.textContent=currentTheme=="dark"?"Light theme":"Dark theme")}function switchTheme(){currentTheme=="dark"?(localStorage!==null&&localStorage.setItem(STORAGE_KEY,"light"),document.documentElement.setAttribute("data-theme","light"),currentTheme="light"):(localStorage!==null&&localStorage.setItem(STORAGE_KEY,"dark"),document.documentElement.setAttribute("data-theme","dark"),currentTheme="dark"),changeButtonText()}function showContent(){document.body.style.visibility="visible",document.body.style.opacity=1}</script></div><p class="h-card vcard"><a href=https://blog.elijahlopez.ca/ class="p-name u-url url fn" rel=me>Elijah Lopez</a>
/
<a class="p-email u-email email" rel=me href=mailto:elijahllopezz@gmail.com>elijahllopezz@gmail.com</a>
<img class=u-photo src=/images/me.png></p></footer></div></body></html>